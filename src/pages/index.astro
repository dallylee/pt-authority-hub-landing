---
import TallyEmbed from '../components/TallyEmbed.astro';
import Testimonials from '../components/Testimonials.astro';
import BookingCTA from '../components/BookingCTA.astro';

const title = "PT Authority Hub - Free Performance Audit";
const description = "Get your free 30-day Performance Audit within 24 hours. Premium personal training for serious results.";
const canonicalURL = "https://pt-authority-hub-landing.pages.dev";

const quizFormId = import.meta.env.PUBLIC_TALLY_QUIZ_FORM_ID;
const statsFormId = import.meta.env.PUBLIC_TALLY_STATS_FORM_ID;
---

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{title}</title>
  <meta name="description" content={description} />
  <link rel="canonical" href={canonicalURL} />
  
  <!-- Open Graph / Social Media -->
  <meta property="og:title" content={title} />
  <meta property="og:description" content={description} />
  <meta property="og:type" content="website" />
  <meta property="og:url" content={canonicalURL} />
</head>
<body class="bg-gray-50 text-gray-900">
  
  <!-- Skip to content link for accessibility -->
  <a href="#content" class="sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 focus:z-50 focus:px-4 focus:py-2 focus:bg-blue-600 focus:text-white focus:rounded">
    Skip to main content
  </a>
  
  <!-- Hero Section -->
  <section id="hero" class="min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-600 to-purple-700 text-white">
    <div class="container mx-auto px-4 md:px-6 max-w-6xl text-center">
      <h1 class="text-4xl sm:text-5xl md:text-6xl font-bold mb-6">Transform Your Performance</h1>
      <p class="text-lg sm:text-xl md:text-2xl mb-8 max-w-3xl mx-auto">Get a free 30-day Performance Audit delivered within 24 hours</p>
      <div class="flex flex-col sm:flex-row items-center justify-center gap-4">
        <a href="#quiz-embed" class="inline-block bg-white text-blue-600 px-8 py-4 min-w-[200px] min-h-[48px] rounded-lg text-lg font-semibold hover:bg-gray-100 transition focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-blue-600">
          Get Your Free Audit
        </a>
        <BookingCTA variant="secondary" className="text-white" />
      </div>
    </div>
  </section>
  
  <!-- Main Content -->
  <main id="content">

  <!-- Trust Logos Section -->
  <section id="trust-logos" class="py-16 bg-white">
    <div class="container mx-auto px-4">
      <h2 class="text-3xl font-bold text-center mb-12">Trusted By Leading Athletes</h2>
      <div class="grid grid-cols-2 md:grid-cols-4 gap-8">
        <div class="flex items-center justify-center bg-gray-100 h-24 rounded">
          <p class="text-gray-500">[Logo Placeholder]</p>
        </div>
        <div class="flex items-center justify-center bg-gray-100 h-24 rounded">
          <p class="text-gray-500">[Logo Placeholder]</p>
        </div>
        <div class="flex items-center justify-center bg-gray-100 h-24 rounded">
          <p class="text-gray-500">[Logo Placeholder]</p>
        </div>
        <div class="flex items-center justify-center bg-gray-100 h-24 rounded">
          <p class="text-gray-500">[Logo Placeholder]</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Mechanism Icons Section -->
  <section id="mechanism-icons" class="py-16 bg-gray-50">
    <div class="container mx-auto px-4">
      <h2 class="text-3xl font-bold text-center mb-12">Our Proven Method</h2>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
        <div class="text-center p-6 bg-white rounded-lg shadow">
          <div class="w-16 h-16 mx-auto mb-4 bg-blue-100 rounded-full flex items-center justify-center">
            <span class="text-2xl">ðŸ“Š</span>
          </div>
          <h3 class="text-xl font-semibold mb-2">Data Analysis</h3>
          <p class="text-gray-600">[Mechanism placeholder]</p>
        </div>
        <div class="text-center p-6 bg-white rounded-lg shadow">
          <div class="w-16 h-16 mx-auto mb-4 bg-blue-100 rounded-full flex items-center justify-center">
            <span class="text-2xl">ðŸŽ¯</span>
          </div>
          <h3 class="text-xl font-semibold mb-2">Personalized Plan</h3>
          <p class="text-gray-600">[Mechanism placeholder]</p>
        </div>
        <div class="text-center p-6 bg-white rounded-lg shadow">
          <div class="w-16 h-16 mx-auto mb-4 bg-blue-100 rounded-full flex items-center justify-center">
            <span class="text-2xl">ðŸš€</span>
          </div>
          <h3 class="text-xl font-semibold mb-2">Continuous Optimization</h3>
          <p class="text-gray-600">[Mechanism placeholder]</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Pain & Value Bridge Section -->
  <section id="pain-value-bridge" class="py-16 bg-white">
    <div class="container mx-auto px-4">
      <div class="max-w-3xl mx-auto">
        <h2 class="text-3xl font-bold text-center mb-8">Stop Guessing, Start Progressing</h2>
        <div class="space-y-6">
          <div class="bg-red-50 border-l-4 border-red-500 p-6">
            <h3 class="font-semibold text-lg mb-2">The Problem</h3>
            <p class="text-gray-700">[Pain point placeholder content will go here]</p>
          </div>
          <div class="bg-green-50 border-l-4 border-green-500 p-6">
            <h3 class="font-semibold text-lg mb-2">The Solution</h3>
            <p class="text-gray-700">[Value proposition placeholder content will go here]</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Quiz Embed Section -->
  <section id="quiz-embed" class="py-16 bg-gray-50">
    <div class="container mx-auto px-4">
      <div class="max-w-2xl mx-auto">
        <!-- What happens next block -->
        <div class="bg-white rounded-xl shadow-sm border border-gray-100 p-8 mb-12">
          <h2 class="text-2xl font-bold mb-4 text-center">What happens next?</h2>
          <ul class="space-y-3 text-gray-700 mb-8">
            <li class="flex items-start gap-2">
              <span class="text-blue-500 mt-1">âœ“</span>
              <span>You will receive your Performance Audit by email within 24 hours.</span>
            </li>
            <li class="flex items-start gap-2">
              <span class="text-blue-500 mt-1">âœ“</span>
              <span>If you uploaded stats, they are used only for the audit and deleted within 30 days.</span>
            </li>
            <li class="flex items-start gap-2">
              <span class="text-blue-500 mt-1">âœ“</span>
              <span>This is coaching guidance, not medical advice.</span>
            </li>
            <li class="flex items-start gap-2">
              <span class="text-blue-500 mt-1">âœ“</span>
              <span>If you want to discuss your plan, book a free 15-minute call.</span>
            </li>
          </ul>
          <div class="text-center">
            <BookingCTA variant="primary" />
          </div>
        </div>

        <h2 class="text-3xl font-bold text-center mb-8">Quick Qualification Quiz</h2>
          formId={quizFormId}
          title="Quick Qualification Quiz"
          height={650}
        />
      </div>
    </div>
  </section>

  <!-- Sync My Stats Section -->
  <section id="sync-my-stats" class="py-16 bg-white">
    <div class="container mx-auto px-4">
      <div class="max-w-2xl mx-auto">
        <p class="text-center text-lg text-gray-600 mb-8">
          Upload your last 30 days of performance data (Apple Watch, Oura, etc.) and receive a 
          <strong>personalized Performance Audit within 24 hours</strong>.
        </p>
        
        <TallyEmbed 
          formId={statsFormId}
          title="Sync My Stats (Optional)"
          height={700}
          description="Your data will be used only for the audit and deleted within 30 days."
        />
        
        <!-- Consent and Disclaimer -->
        <div class="mt-6 space-y-4">
          <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
            <p class="text-sm text-gray-700">
              <strong>Consent:</strong> By submitting this form, you consent to sharing your health data for audit purposes. Data will be used only for the audit and deleted within 30 days.
            </p>
          </div>
          
          <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4">
            <p class="text-sm text-gray-700">
              <strong>Disclaimer:</strong> This is not medical advice. Consult a healthcare professional before starting any fitness program.
            </p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Reviews Section -->
  <Testimonials />

  <!-- Live Spots Remaining Section -->
  <section id="spots-remaining" class="py-16 bg-blue-600 text-white">
    <div class="container mx-auto px-4 text-center">
      <h2 class="text-3xl font-bold mb-4">Limited Availability</h2>
      <div class="text-6xl font-bold mb-2" id="spots-count">
        Loading...
      </div>
      <p class="text-xl">Spots Remaining This Month</p>
    </div>
  </section>

  <!-- FAQ Section -->
  <section id="faq" class="py-16 bg-white">
    <div class="container mx-auto px-4">
      <div class="max-w-3xl mx-auto">
        <h2 class="text-3xl font-bold text-center mb-12">Frequently Asked Questions</h2>
        <div class="space-y-4">
          <div class="border border-gray-200 rounded-lg p-6">
            <h3 class="font-semibold text-lg mb-2">Question 1 placeholder?</h3>
            <p class="text-gray-600">Answer placeholder content will go here.</p>
          </div>
          <div class="border border-gray-200 rounded-lg p-6">
            <h3 class="font-semibold text-lg mb-2">Question 2 placeholder?</h3>
            <p class="text-gray-600">Answer placeholder content will go here.</p>
          </div>
          <div class="border border-gray-200 rounded-lg p-6">
            <h3 class="font-semibold text-lg mb-2">Question 3 placeholder?</h3>
            <p class="text-gray-600">Answer placeholder content will go here.</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  </main>

  <!-- Footer -->
  <footer id="footer" class="py-8 bg-gray-900 text-white">
    <div class="container mx-auto px-4 text-center">
      <p>&copy; 2026 PT Authority Hub. All rights reserved.</p>
      <p class="text-sm text-gray-400 mt-2">[Footer links placeholder]</p>
    </div>
  </footer>

  <!-- Client-side script to fetch and display spots remaining -->
  <script>
    async function loadSpotsRemaining() {
      try {
        const response = await fetch('/spots.json');
        const data = await response.json();
        const spotsElement = document.getElementById('spots-count');
        if (spotsElement && data.spotsRemaining !== undefined) {
          spotsElement.textContent = data.spotsRemaining;
        }
      } catch (error) {
        console.error('Error loading spots data:', error);
        const spotsElement = document.getElementById('spots-count');
        if (spotsElement) {
          spotsElement.textContent = 'N/A';
        }
      }
    }
    
    // Load spots when DOM is ready
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', loadSpotsRemaining);
    } else {
      loadSpotsRemaining();
    }
  </script>

</body>
</html>
