---
const {
  formId,
  title = "Tally form",
  height = 240,
  params = "alignLeft=1&hideTitle=1&transparentBackground=1&dynamicHeight=1",
} = Astro.props;

if (!formId) throw new Error("TallyInline: formId is required");

const embedUrl = `https://tally.so/embed/${formId}?${params}`;
---

<div class="tally-embed">
  <iframe
    src={embedUrl}
    data-tally-src={embedUrl}
    loading="lazy"
    width="100%"
    height={height}
    frameborder="0"
    marginheight="0"
    marginwidth="0"
    title={title}
  ></iframe>

  <noscript>
    <p>
      JavaScript is required to load the inline form. You can open it here:
      <a href={`https://tally.so/r/${formId}`} target="_blank" rel="noopener noreferrer">
        Open the form
      </a>
    </p>
  </noscript>
</div>
