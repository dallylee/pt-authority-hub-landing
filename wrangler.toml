# PT Authority Hub - Cloudflare Pages Configuration
name = "pt-authority-hub-landing"
compatibility_date = "2026-01-13"
compatibility_flags = ["nodejs_compat", "disable_nodejs_process_v2", "global_fetch_strictly_public"]
pages_build_output_dir = "./dist"

# Observability for debugging
[observability]
enabled = true

# Production Environment
[env.production.vars]
EMAIL_FROM = "onboarding@resend.dev"
EMAIL_TO = "dallyzg@gmail.com"
WORKSPACE_ID = "06077e73-9a5e-4c38-9968-f653698e2345"

[[env.production.d1_databases]]
binding = "DB"
database_id = "324ee536-b279-4798-95d3-b8b24940a1d5"
database_name = "pt-authority-hub-db"

[[env.production.r2_buckets]]
binding = "AUDIT_UPLOADS"
bucket_name = "pt-authority-hub-audit-uploads"

[[env.production.kv_namespaces]]
binding = "SESSION"
id = "b793cdaf51734b0e9268328a86e54264"

# Preview Environment (mirror production for testing)
[env.preview.vars]
EMAIL_FROM = "onboarding@resend.dev"
EMAIL_TO = "dallyzg@gmail.com"
WORKSPACE_ID = "06077e73-9a5e-4c38-9968-f653698e2345"

[[env.preview.d1_databases]]
binding = "DB"
database_id = "324ee536-b279-4798-95d3-b8b24940a1d5"
database_name = "pt-authority-hub-db"

[[env.preview.r2_buckets]]
binding = "AUDIT_UPLOADS"
bucket_name = "pt-authority-hub-audit-uploads"

[[env.preview.kv_namespaces]]
binding = "SESSION"
id = "b793cdaf51734b0e9268328a86e54264"

# Secrets (set via CLI - NOT in this file):
# - RESEND_API_KEY
# - DOWNLOAD_TOKEN_SECRET
# 
# Set secrets with:
#   npx wrangler pages secret put RESEND_API_KEY --project-name pt-authority-hub-landing
#   npx wrangler pages secret put DOWNLOAD_TOKEN_SECRET --project-name pt-authority-hub-landing